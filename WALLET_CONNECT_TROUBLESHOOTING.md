# 钱包连接故障排除指南

## 常见错误及解决方案

### 1. "there is a pending request, please request after it resolved"

**错误原因：**
- MetaMask 或其他钱包扩展程序有未完成的请求
- 用户快速点击连接按钮导致重复请求
- 钱包扩展程序状态异常

**解决方案：**

#### 方法一：检查钱包扩展程序
1. 打开 MetaMask 扩展程序
2. 查看是否有待处理的请求（通常显示为弹窗）
3. 完成或拒绝待处理的请求
4. 重新尝试连接

#### 方法二：刷新页面
1. 刷新浏览器页面
2. 等待页面完全加载
3. 重新尝试连接钱包

#### 方法三：重启钱包扩展程序
1. 右键点击 MetaMask 扩展程序图标
2. 选择"移除扩展程序"
3. 重新安装 MetaMask
4. 导入或创建钱包
5. 重新尝试连接

#### 方法四：清除浏览器缓存
1. 打开浏览器开发者工具 (F12)
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"
4. 重新尝试连接

### 2. "用户拒绝了签名请求"

**错误原因：**
- 用户在签名弹窗中点击了"拒绝"
- 钱包扩展程序被意外关闭

**解决方案：**
1. 重新点击"连接钱包"按钮
2. 在签名弹窗中点击"签名"
3. 确保钱包扩展程序保持打开状态

### 3. "钱包未安装"

**错误原因：**
- 未安装 MetaMask 或其他以太坊钱包
- 钱包扩展程序被禁用

**解决方案：**
1. 安装 MetaMask：https://metamask.io/
2. 确保钱包扩展程序已启用
3. 刷新页面后重试

### 4. "连接钱包失败"

**错误原因：**
- 网络连接问题
- 钱包扩展程序故障
- 浏览器兼容性问题

**解决方案：**
1. 检查网络连接
2. 尝试使用不同的浏览器
3. 重启钱包扩展程序
4. 检查钱包扩展程序版本

## 预防措施

### 1. 避免重复点击
- 点击"连接钱包"后，等待操作完成
- 不要快速连续点击按钮
- 观察按钮状态变化

### 2. 保持钱包扩展程序稳定
- 定期更新钱包扩展程序
- 避免同时打开多个需要钱包连接的网站
- 定期清理浏览器缓存

### 3. 网络环境
- 使用稳定的网络连接
- 避免使用代理或VPN（除非必要）
- 确保可以访问以太坊网络

## 调试信息

如果问题持续存在，请提供以下信息：

1. **浏览器信息**
   - 浏览器类型和版本
   - 操作系统

2. **钱包信息**
   - 钱包类型（MetaMask、WalletConnect等）
   - 钱包版本

3. **错误详情**
   - 完整的错误消息
   - 错误发生时的操作步骤
   - 浏览器控制台错误日志

4. **网络信息**
   - 是否使用代理/VPN
   - 网络连接类型

## 联系支持

如果以上方法都无法解决问题，请：

1. 截图错误信息
2. 提供浏览器控制台日志
3. 描述详细的操作步骤
4. 说明使用的设备和环境

## 技术说明

### 防重复机制
应用已实现多层防重复机制：
- 组件级别的状态管理
- 钱包服务级别的请求控制
- 钱包地址级别的登录尝试跟踪
- 自动清理机制

### 错误处理
- 识别特定的钱包错误类型
- 提供用户友好的错误消息
- 自动重试机制
- 状态恢复功能 